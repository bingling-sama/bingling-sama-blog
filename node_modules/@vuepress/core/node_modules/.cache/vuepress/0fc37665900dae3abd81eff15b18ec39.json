{"remainingRequest":"E:\\bingling-sama-blog\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!E:\\bingling-sama-blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\bingling-sama-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\bingling-sama-blog\\node_modules\\vuepress-theme-modern-blog\\src\\components\\SearchBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\bingling-sama-blog\\node_modules\\vuepress-theme-modern-blog\\src\\components\\SearchBox.vue","mtime":1609037243858},{"path":"E:\\bingling-sama-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1608470252416},{"path":"E:\\bingling-sama-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":1608905603205},{"path":"E:\\bingling-sama-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1608470252416},{"path":"E:\\bingling-sama-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":1608905605904}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgRmxleHNlYXJjaCBmcm9tICdmbGV4c2VhcmNoJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmRleDogbnVsbCwKICAgICAgcXVlcnk6ICcnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5kZXggPSBuZXcgRmxleHNlYXJjaCh7CiAgICAgIHRva2VuaXplOiAnZm9yd2FyZCcsCiAgICAgIGRvYzogewogICAgICAgIGlkOiAna2V5JywKICAgICAgICBmaWVsZDogWyd0aXRsZScsICdjb250ZW50J10KICAgICAgfQogICAgfSk7CiAgICB2YXIgcGFnZXMgPSB0aGlzLiRzaXRlLnBhZ2VzOwogICAgdGhpcy5pbmRleC5hZGQocGFnZXMpOwogIH0sCiAgbWV0aG9kczogewogICAgcXVlcnlTZWFyY2hBc3luYzogZnVuY3Rpb24gcXVlcnlTZWFyY2hBc3luYyhxdWVyeVN0cmluZywgY2IpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB0aGVtZUNvbmZpZyA9IHRoaXMuJHNpdGUudGhlbWVDb25maWc7CiAgICAgIHZhciBxdWVyeSA9IHF1ZXJ5U3RyaW5nLnRyaW0oKS50b0xvd2VyQ2FzZSgpOwogICAgICB2YXIgdXNpbmdHb29nbGVTZWFyY2ggPSB0aGVtZUNvbmZpZy5nb29nbGVDdXN0b21TZWFyY2hFbmdpbmVJRCAmJiB0aGVtZUNvbmZpZy5nb29nbGVBUElLZXk7CiAgICAgIHZhciBtYXggPSB0aGVtZUNvbmZpZy5zZWFyY2hNYXhTdWdnZXN0aW9ucyB8fCAyMDsKCiAgICAgIGlmICh0aGlzLmluZGV4ID09PSBudWxsIHx8IHF1ZXJ5Lmxlbmd0aCA8IDEpIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICByZXR1cm4gY2IoW10pOwogICAgICB9CgogICAgICB0aGlzLmluZGV4LnNlYXJjaChxdWVyeSwgewogICAgICAgIGxpbWl0OiBtYXgsCiAgICAgICAgdGhyZXNob2xkOiA0LAogICAgICAgIGVuY29kZTogJ2V4dHJhJwogICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHsKICAgICAgICAgIHZhciByZXNvbHZlZFJlc3VsdCA9IHJlc3VsdC5tYXAoZnVuY3Rpb24gKHBhZ2UpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBsaW5rOiBwYWdlLnBhdGgsCiAgICAgICAgICAgICAgdmFsdWU6IF90aGlzLmdldFF1ZXJ5U25pcHBldChwYWdlKQogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gY2IocmVzb2x2ZWRSZXN1bHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodXNpbmdHb29nbGVTZWFyY2gpIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgIHJldHVybiBjYihbewogICAgICAgICAgICAgIHZhbHVlOiBfdGhpcy4kdCgnc2VhcmNoX2VudGlyZV9zaXRlJywgewogICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbGluazogIi9zZWFyY2g/cT0iLmNvbmNhdChxdWVyeSkKICAgICAgICAgICAgfV0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICAgICAgICAgIGNiKFt7CiAgICAgICAgICAgICAgdmFsdWU6IF90aGlzLiR0KCdub19yZXN1bHRzJyksCiAgICAgICAgICAgICAgbGluazogJycKICAgICAgICAgICAgfV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0UXVlcnlTbmlwcGV0OiBmdW5jdGlvbiBnZXRRdWVyeVNuaXBwZXQocGFnZSkgewogICAgICB2YXIgcXVlcnlQb3NpdGlvbiA9IHBhZ2UuY29udGVudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodGhpcy5xdWVyeSk7CiAgICAgIHZhciBzdGFydEluZGV4ID0gcXVlcnlQb3NpdGlvbiAtIDIwIDwgMCA/IDAgOiBxdWVyeVBvc2l0aW9uIC0gMjA7CiAgICAgIHZhciBlbmRJbmRleCA9IHF1ZXJ5UG9zaXRpb24gKyAzMDsKICAgICAgdmFyIHF1ZXJ5U25pcHBldCA9IHBhZ2UuY29udGVudC5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKHRoaXMucXVlcnksICI8c3Ryb25nIGNsYXNzPVwidGV4dC0tcHJpbWFyeVwiPiIuY29uY2F0KHRoaXMucXVlcnksICI8L3N0cm9uZz4iKSkuc3BsaXQoJyAnKS5zbGljZSgxLCAtMSkuam9pbignICcpOwoKICAgICAgaWYgKHF1ZXJ5U25pcHBldCkgewogICAgICAgIHJldHVybiAiXG4gICAgICAgIDxzdHJvbmcgY2xhc3M9XCJ0ZXh0LS1wcmltYXJ5XCI+Ii5jb25jYXQocGFnZS50aXRsZSwgIjwvc3Ryb25nPlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LW11dGVkIHBsLTJcIj4gIikuY29uY2F0KHF1ZXJ5U25pcHBldCwgIiAuLjwvZGl2PiIpLnJlcGxhY2UoL1x8L2csICcgJykucmVwbGFjZSgvOjo6L2csICcgJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHBhZ2UudGl0bGU7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVTZWxlY3Q6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdChpdGVtKSB7CiAgICAgIGlmIChpdGVtLmxpbmspIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChpdGVtLmxpbmspOwogICAgICB9CgogICAgICB0aGlzLnF1ZXJ5ID0gJyc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SearchBox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"search-wrapper u-px3 d-flex align-items-center\">\n    <el-autocomplete\n      ref=\"searchInput\"\n      slot=\"reference\"\n      v-model=\"query\"\n      size=\"small\"\n      :fetch-suggestions=\"querySearchAsync\"\n      :placeholder=\"$t('search_placeholder')\"\n      popper-class=\"components-search\"\n      :trigger-on-focus=\"false\"\n      placement=\"bottom-end\"\n      :debounce=\"200\"\n      @select=\"handleSelect\"\n    >\n      <template slot-scope=\"props\">\n        <!-- eslint-disable-next-line -->\n        <li role=\"option\" v-html=\"props.item.value\"/>\n      </template>\n    </el-autocomplete>\n  </div>\n</template>\n\n<script>\nimport Flexsearch from 'flexsearch'\n\nexport default {\n  data () {\n    return {\n      index: null,\n      query: '',\n    }\n  },\n  mounted () {\n    this.index = new Flexsearch({\n      tokenize: 'forward',\n      doc: {\n        id: 'key',\n        field: ['title', 'content'],\n      },\n    })\n    const { pages } = this.$site\n    this.index.add(pages)\n  },\n  methods: {\n    querySearchAsync (queryString, cb) {\n      const { themeConfig } = this.$site\n      const query = queryString.trim().toLowerCase()\n      const usingGoogleSearch =\n        themeConfig.googleCustomSearchEngineID && themeConfig.googleAPIKey\n      const max = themeConfig.searchMaxSuggestions || 20\n      if (this.index === null || query.length < 1) {\n        // eslint-disable-next-line\n        return cb([])\n      }\n      this.index.search(\n        query,\n        {\n          limit: max,\n          threshold: 4,\n          encode: 'extra',\n        },\n        result => {\n          if (result.length) {\n            const resolvedResult = result.map(page => {\n              return {\n                link: page.path,\n                value: this.getQuerySnippet(page),\n              }\n            })\n            return cb(resolvedResult)\n          } else {\n            if (usingGoogleSearch) {\n              // eslint-disable-next-line\n              return cb([\n                {\n                  value: this.$t('search_entire_site', { query }),\n                  link: `/search?q=${query}`,\n                },\n              ])\n            } else {\n              // eslint-disable-next-line\n              cb([{ value: this.$t('no_results'), link: '' }])\n            }\n          }\n        },\n      )\n    },\n    getQuerySnippet (page) {\n      const queryPosition = page.content.toLowerCase().indexOf(this.query)\n      const startIndex = queryPosition - 20 < 0 ? 0 : queryPosition - 20\n      const endIndex = queryPosition + 30\n      const querySnippet = page.content\n        .slice(startIndex, endIndex)\n        .toLowerCase()\n        .replace(\n          this.query,\n          `<strong class=\"text--primary\">${this.query}</strong>`,\n        )\n        .split(' ')\n        .slice(1, -1)\n        .join(' ')\n      if (querySnippet) {\n        return `\n        <strong class=\"text--primary\">${page.title}</strong>\\n\n        <div class=\"text-muted pl-2\"> ${querySnippet} ..</div>`\n          .replace(/\\|/g, ' ')\n          .replace(/:::/g, ' ')\n      } else {\n        return page.title\n      }\n    },\n    handleSelect (item) {\n      if (item.link) {\n        this.$router.push(item.link)\n      }\n      this.query = ''\n    },\n  },\n}\n</script>\n\n<style lang=\"stylus\">\n.search-wrapper {\n  .el-input__inner {\n    height: 2rem !important;\n  }\n\n  .search-wrapper input {\n    width: 160px;\n    transition: all 0.5s ease;\n  }\n\n  .el-autocomplete-suggestion__wrap, .el-autocomplete-suggestion {\n    width: 100%;\n  }\n\n  .el-input__suffix {\n    line-height: 2rem;\n  }\n}\n\n.components-search {\n  width: 30rem !important;\n}\n\n@media only screen and (max-width: $MQMobile) {\n  .components-search {\n    width: calc(100% - 10px) !important;\n  }\n}\n</style>\n"],"sourceRoot":"node_modules/vuepress-theme-modern-blog/src/components"}]}